/* Ephox link checker plugin
 *
 * Copyright 2010-2017 Ephox Corporation.  All rights reserved.
 *
 * Version: 1.0.0-20
 */

!function(){var a={},b=function(b){for(var c=a[b],e=c.deps,f=c.defn,g=e.length,h=new Array(g),i=0;i<g;++i)h[i]=d(e[i]);var j=f.apply(null,h);if(void 0===j)throw"module ["+b+"] returned undefined";c.instance=j},c=function(b,c,d){if("string"!=typeof b)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+b;if(void 0===d)throw"no definition function for "+b;a[b]={deps:c,defn:d,instance:void 0}},d=function(c){var d=a[c];if(void 0===d)throw"module ["+c+"] was undefined";return void 0===d.instance&&b(c),d.instance},e=function(a,b){for(var c=a.length,e=new Array(c),f=0;f<c;++f)e.push(d(a[f]));b.apply(null,b)},f={};f.bolt={module:{api:{define:c,require:e,demand:d}}};var g=c,h=function(a,b){g(a,[],function(){return b})};h("1",tinymce.PluginManager),g("2",[],function(){return function(){var a={},b=function(b){a[b]=!0},c=function(b){return b in a};return{add:b,has:c}}}),h("1a",Array),h("1k",String),g("19",["1a","1k"],function(a,b){var c=function(a){return function(b){return a===b}},d=function(){var b=a.prototype.indexOf,d=function(a,c){return b.call(a,c)},e=function(a,b){return r(a,c(b))};return void 0===b?e:d}(),e=function(a,b){return d(a,b)>-1},f=function(a,b){return r(a,b)>-1},g=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},h=function(b,c){for(var d=b.length,e=new a(d),f=0;f<d;f++){var g=b[f];e[f]=c(g,f,b)}return e},i=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];b(e,c,a)}},j=function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e],h=b(g,e,a)?c:d;h.push(g)}return{pass:c,fail:d}},k=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},l=function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],i=b(h);i!==c&&(d.push(e),e=[]),c=i,e.push(h)}return 0!==e.length&&d.push(e),d},m=function(a,b,c){return n(z(a),b,c)},n=function(a,b,c){return i(a,function(a){c=b(c,a)}),c},o=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return e}},p=function(a,b,c){var d=o(a,b);return void 0!==d?d:c},q=function(a,c,d){var e=o(a,c);if(void 0===e)throw d||"Could not find element in array: "+b(a);return e},r=function(a,b){for(var c=b||v,d=0,e=a.length;d<e;++d)if(c(a[d])===!0)return d;return-1},s=a.prototype.push,t=function(a){for(var b=[],c=0,d=a.length;c<d;++c)s.apply(b,a[c]);return b},u=function(a,b){var c=h(a,b);return t(c)},v=c(!0),w=function(a,b){for(var c=b||v,d=0,e=a.length;d<e;++d)if(c(a[d],d)!==!0)return!1;return!0},x=function(a,b){return a.length===b.length&&w(a,function(a,c){return a===b[c]})},y=a.prototype.slice,z=function(a){var b=y.call(a,0);return b.reverse(),b},A=function(a,b){return k(a,function(a){return!e(b,a)})},B=function(a,c){for(var d={},e=0,f=a.length;e<f;e++){var g=a[e];d[b(g)]=c(g,e)}return d},C=function(a){return[a]};return{map:h,each:i,partition:j,filter:k,groupBy:l,indexOf:d,foldr:m,foldl:n,find:o,findIndex:r,findOr:p,findOrDie:q,flatten:t,bind:u,forall:w,exists:f,contains:e,equal:x,reverse:z,chunk:g,difference:A,mapToObject:B,pure:C}}),g("18",["1a","1k"],function(a,b){var c=function(c){if(null===c)return"null";var d=typeof c;return"object"===d&&a.prototype.isPrototypeOf(c)?"array":"object"===d&&b.prototype.isPrototypeOf(c)?"string":d},d=function(a){return function(b){return c(b)===a}};return{isString:d("string"),isObject:d("object"),isArray:d("array"),isNull:d("null"),isBoolean:d("boolean"),isUndefined:d("undefined"),isFunction:d("function"),isNumber:d("number")}}),g("1l",["18","1a"],function(a,b){var c=function(a,b){return b},d=function(b,c){var d=a.isObject(b)&&a.isObject(c);return d?f(b,c):c},e=function(a){return function(){for(var c=new b(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];if(0===c.length)throw"Can't merge zero objects";for(var e={},f=0;f<c.length;f++){var g=c[f];for(var h in g)g.hasOwnProperty(h)&&(e[h]=a(e[h],g[h]))}return e}},f=e(d),g=e(c);return{deepMerge:f,merge:g}}),g("q",["1a"],function(a){var b=function(){},c=function(a,b){return function(){return a(b.apply(null,arguments))}},d=function(a){return function(){return a}},e=function(a){return a},f=function(a,b){return a===b},g=function(b){for(var c=new a(arguments.length-1),d=1;d<arguments.length;d++)c[d-1]=arguments[d];return function(){for(var d=new a(arguments.length),e=0;e<d.length;e++)d[e]=arguments[e];var f=c.concat(d);return b.apply(null,f)}},h=function(a){return function(){return!a.apply(null,arguments)}},i=function(a){return function(){throw a}},j=function(a){return a()},k=function(a){a()};return{noop:b,compose:c,constant:d,identity:e,tripleEquals:f,curry:g,not:h,die:i,apply:j,call:k}}),h("17",Object),g("1e",["q","17"],function(a,b){var c=a.constant(!1),d=a.constant(!0),e=function(){return f},f=function(){var f=function(a){return a.isNone()},g=function(a){return a()},h=function(a){return a},i={fold:function(a,b){return a()},is:c,isSome:c,isNone:d,getOr:h,getOrThunk:g,getOrDie:function(a){throw a||"error: getOrDie called on none."},or:h,orThunk:g,map:e,ap:e,each:e,bind:e,flatten:e,exists:c,forall:d,filter:e,equals:f,equals_:f,toArray:function(){return[]},toString:a.constant("none()")};return b.freeze&&b.freeze(i),i}(),g=function(a){var b=function(){return a},h=function(){return k},i=function(b){return g(b(a))},j=function(b){return b(a)},k={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:d,isNone:c,getOr:b,getOrThunk:b,getOrDie:b,or:h,orThunk:h,map:i,ap:function(b){return b.fold(e,function(b){return g(b(a))})},each:i,bind:j,flatten:b,exists:j,forall:j,filter:function(b){return b(a)?k:f},equals:function(b){return b.is(a)},equals_:function(b,d){return b.fold(c,function(b){return d(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return k},h=function(a){return null===a||void 0===a?f:g(a)},i=function(a,b){return a.equals(b)},j=function(a,b,c){return a.equals_(b,c)};return{some:g,none:e,from:h,equals:i,equals_:j}}),g("r",["q","1e"],function(a,b){var c=function(a){return e(function(b,c){return c(a)})},d=function(a){return e(function(b,c){return b(a)})},e=function(e){var f=function(b){return e(a.constant(!1),function(a){return a===b})},g=function(){return e(a.constant(!1),a.constant(!0))},h=a.not(g),i=function(b){return e(a.constant(b),a.identity)},j=function(b){return e(b,a.identity)},k=function(){return e(function(b){a.die(b)()},a.identity)},l=function(b){return e(a.constant(b),c)},m=function(a){return e(a,c)},n=function(a){return p(function(b){return c(a(b))})},o=n,p=function(a){return e(d,a)},q=function(b){return e(a.constant(!1),b)},r=function(b){return e(a.constant(!0),b)},s=function(){return e(b.none,b.some)};return{is:f,isValue:g,isError:h,getOr:i,getOrThunk:j,getOrDie:k,or:l,orThunk:m,fold:e,map:n,each:o,bind:p,exists:q,forall:r,toOption:s}};return{value:c,error:d}}),g("13",["19","1l","r"],function(a,b,c){var d=function(d,e){return a.foldl(d,function(a,d){return a.fold(function(a){return d.fold(function(b){return c.error(a.concat(b))},function(b){return c.error(a)})},function(a){return d.fold(function(a){return c.error(a)},function(d){return c.value(b.deepMerge(a,d))})})},c.value(e))},e=function(b){return a.foldl(b,function(a,b){return a.fold(function(a){return b.fold(function(b){return c.error(a.concat(b))},function(b){return c.error(a)})},function(a){return b.fold(function(a){return c.error(a)},function(b){return c.value(a.concat([b]))})})},c.value([]))};return{consolidateObj:d,consolidateArr:e}}),g("14",["19"],function(a){var b=function(b,c){var d={};return a.each(c,function(a){void 0!==b[a]&&b.hasOwnProperty(a)&&(d[a]=b[a])}),d},c=function(b,c){var d={};return a.each(b,function(a){var b=a[c];d[b]=a}),d};return{narrow:b,indexOnKey:c}}),g("15",["1e"],function(a){var b=function(b){return function(c){return c.hasOwnProperty(b)?a.from(c[b]):a.none()}},c=function(a,c){return function(d){return b(a)(d).getOr(c)}},d=function(a,c){return b(c)(a)},e=function(a,b){return a.hasOwnProperty(b)&&void 0!==a[b]&&null!==a[b]};return{readOpt:b,readOr:c,readOptFrom:d,hasKey:e}}),g("16",["19"],function(a){var b=function(a,b){var c={};return c[a]=b,c},c=function(b){var c={};return a.each(b,function(a){c[a.key]=a.value}),c};return{wrap:b,wrapAll:c}}),g("m",["13","14","15","16"],function(a,b,c,d){var e=function(a,c){return b.narrow(a,c)},f=function(a){return c.readOpt(a)},g=function(a,b){return c.readOr(a,b)},h=function(a,b){return c.readOptFrom(a,b)},i=function(a,b){return d.wrap(a,b)},j=function(a){return d.wrapAll(a)},k=function(a,c){return b.indexOnKey(a,c)},l=function(b,c){return a.consolidateObj(b,c)},m=function(a,b){return c.hasKey(a,b)};return{narrow:e,readOpt:f,readOr:g,readOptFrom:h,wrap:i,wrapAll:j,indexOnKey:k,hasKey:m,consolidate:l}}),g("n",["17"],function(a){var b=function(){var b=a.keys,c=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===b?c:b}(),c=function(a,c){for(var d=b(a),e=0,f=d.length;e<f;e++){var g=d[e],h=a[g];c(h,g,a)}},d=function(a,b){return e(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},e=function(a,b){var d={};return c(a,function(c,e){var f=b(c,e,a);d[f.k]=f.v}),d},f=function(a,b){var d={},e={};return c(a,function(a,c){var f=b(a,c)?d:e;f[c]=a}),{t:d,f:e}},g=function(a,b){var d=[];return c(a,function(a,c){d.push(b(a,c))}),d},h=function(a,c){for(var d=b(a),e=0,f=d.length;e<f;e++){var g=d[e],h=a[g];if(c(h,g,a))return h}},i=function(a){return g(a,function(a){return a})},j=function(a){return i(a).length};return{bifilter:f,each:c,map:d,mapToArray:g,tupleMap:e,find:h,keys:b,values:i,size:j}}),g("o",["18","19","n","1a"],function(a,b,c,d){var e=function(e){if(!a.isArray(e))throw"cases must be an array";if(0===e.length)throw"there must be at least one case";var f={};return b.each(e,function(b,g){var h=c.keys(b);if(1!==h.length)throw"one and only one name per case";var i=h[0],j=b[i];if(void 0!==f[i])throw"duplicate key detected:"+i;if("cata"===i)throw"cannot have a case named cata (sorry)";if(!a.isArray(j))throw"case arguments must be an array";f[i]=function(){var a=arguments.length;if(a!==j.length)throw"Wrong number of arguments to case "+i+". Expected "+j.length+" ("+j+"), got "+a;for(var b=new d(a),c=0;c<b.length;c++)b[c]=arguments[c];return{fold:function(){if(arguments.length!==e.length)throw"Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length;var a=arguments[g];return a.apply(null,b)}}}}),f};return{generate:e}}),g("c",["o"],function(a){var b=a.generate([{invalid:["invalidUrl"]},{unknown:["unknownUrl"]},{valid:["validUrl"]}]),c=function(a,b,c,d){return a.fold(b,c,d)},d=function(a,c){return"VALID"===c?b.valid(a):"INVALID"===c?b.invalid(a):b.unknown(a)};return{cata:c,derive:d}}),g("1b",["1a"],function(a){var b=function(b){return function(){var c=a.prototype.slice.call(arguments),d=this;setTimeout(function(){b.apply(d,c)},0)}};return{bounce:b}}),g("1c",[],function(){return function(a,b){var c=function(c){return a(function(a){b(function(b){var d=c(b);a(d)})})},d=function(c){return a(function(a){b(function(b){c(b).get(a)})})},e=function(c){return a(function(a){b(function(b){c.get(a)})})};return{get:b,map:c,bind:d,anonBind:e}}}),g("1d",["19"],function(a){return function(b){var c=function(a){return b(function(b){b(a)})},d=function(c){return b(function(b){var d=[],e=0,f=function(a){return function(f){d[a]=f,e++,e>=c.length&&b(d)}};0===c.length?b([]):a.each(c,function(a,b){a.get(f(b))})})},e=function(b,c){return d(a.map(b,c))},f=function(a,c,d){return b(function(b){var e=!1,f=!1,g=void 0,h=void 0,i=function(){if(e&&f){var a=d(g,h);b(a)}};a.get(function(a){g=a,e=!0,i()}),c.get(function(a){h=a,f=!0,i()})})},g=function(a,b){return function(c){return b(c).bind(a)}};return{nu:b,pure:c,par:d,mapM:e,lift2:f,compose:g}}}),g("p",["1b","1c","1d"],function(a,b,c){var d=function(c){var e=function(b){c(a.bounce(b))};return b(d,e)};return c(d)}),g("f",["p","q","r"],function(a,b,c){var d=b.compose(a.pure,c.value),e=b.compose(a.pure,c.error),f=function(a,b,c){return a.map(function(a){return a.fold(b,c)})},g=function(a,b){return a.map(function(a){return a.bind(b)})},h=function(a,b){return a.bind(function(a){return a.bind(b)})},i=function(a,b){return a.map(function(a){return a.map(b)})},j=function(a,b,c){return a.get(function(a){return a.fold(b,c)})};return{pure:d,failed:e,foldSync:f,bindSync:g,bindAsync:h,mapSync:i,handle:j}}),h("1f",Date),g("v",["1f"],function(a){var b=function(){return(new a).getTime()};return{now:b}}),g("1r",["19","n","q","1a"],function(a,b,c,d){var e=function(e,f){var g=function(){for(var b=new d(arguments.length),f=0;f<b.length;f++)b[f]=arguments[f];if(e.length!==b.length)throw'Wrong number of arguments to struct. Expected "['+e.length+']", got '+b.length+" arguments";var g={};return a.each(e,function(a,d){g[a]=c.constant(b[d])}),g},h=function(a,b){for(var d=0;d<e.length;d++){var g=f&&f[d]||c.tripleEquals,h=e[d];if(!g(a[h](),b[h]()))return!1}return!0},i=function(a){return b.map(a,function(a){return a()})};return{nu:g,eq:h,evaluate:i}};return{product:e}}),g("1q",["1r"],function(a){return function(){return a.product(arguments).nu}}),g("20",["18","19"],function(a,b){var c=function(a){return a.slice(0).sort()},d=function(a,b){throw"All required keys ("+c(a).join(", ")+") were not specified. Specified keys were: "+c(b).join(", ")+"."},e=function(a){throw"Unsupported keys for object: "+c(a).join(", ")},f=function(c,d){if(!a.isArray(d))throw"The "+c+" fields must be an array. Was: "+d+".";b.each(d,function(b){if(!a.isString(b))throw"The value "+b+" in the "+c+" fields was not a string."})},g=function(a,b){throw"All values need to be of type: "+b+". Keys ("+c(a).join(", ")+") were not."},h=function(a){var d=c(a),e=b.find(d,function(a,b){return b<d.length-1&&a===d[b+1]});if(void 0!==e&&null!==e)throw"The field: "+e+" occurs more than once in the combined fields: ["+d.join(", ")+"]."};return{sort:c,reqMessage:d,unsuppMessage:e,validateStrArr:f,invalidTypeMessage:g,checkDupes:h}}),g("1s",["19","n","q","1e","20","17"],function(a,b,c,d,e,f){return function(g,h){var i=g.concat(h);if(0===i.length)throw"You must specify at least one required or optional field.";return e.validateStrArr("required",g),e.validateStrArr("optional",h),e.checkDupes(i),function(j){var k=b.keys(j),l=a.forall(g,function(b){return a.contains(k,b)});l||e.reqMessage(g,k);var m=a.filter(k,function(b){return!a.contains(i,b)});m.length>0&&e.unsuppMessage(m);var n={};return a.each(g,function(a){n[a]=c.constant(j[a])}),a.each(h,function(a){n[a]=c.constant(f.prototype.hasOwnProperty.call(j,a)?d.some(j[a]):d.none())}),n}}}),g("1g",["1q","1r","1s"],function(a,b,c){return{immutable:a,immutable2:b,immutableBag:c}}),g("s",["18","n","v","1e","1g"],function(a,b,c,d,e){var f=36e5;return function(g,h){var i=void 0!==h?h:f,j=e.immutable("result","timestamp"),k={},l=function(a,b,c){k[a]=j(b,c)},m=function(a,b){return d.from(k[b]).filter(function(b){return a-b.timestamp()<i}).map(function(a){return a.result()})},n=function(){return b.map(k,function(a){return{result:a.result(),timestamp:a.timestamp()}})},o=function(a){var d=c.now();b.map(a,function(a,b){d-a.timestamp<i&&l(b,a.result,a.timestamp)})};return a.isObject(g)&&o(g),{set:l,get:m,dump:n}}}),g("1u",["r"],function(a){var b=function(b,c){return a.error([{path:b,err:c}])},c=function(a){return"Failed path: ("+a.path.join(" > ")+")\n"+a.err};return{nu:b,toString:c}}),g("1n",["q","o"],function(a,b){var c=b.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),d=function(b){return c.defaultedThunk(a.constant(b))},e=function(b){return c.asDefaultedOptionThunk(a.constant(b))},f=function(b){return c.mergeWithThunk(a.constant(b))};return{strict:c.strict,asOption:c.asOption,defaulted:d,defaultedThunk:c.defaultedThunk,asDefaultedOption:e,asDefaultedOptionThunk:c.asDefaultedOptionThunk,mergeWith:f,mergeWithThunk:c.mergeWithThunk}}),g("2b",[],function(){return Function("return this;")()}),g("29",["2b"],function(a){var b=function(b,c){for(var d=c||a,e=0;e<b.length&&void 0!==d&&null!==d;++e)d=d[b[e]];return d},c=function(a,c){var d=a.split(".");return b(d,c)};return{path:b,resolve:c}}),g("21",["29"],function(a){var b=function(b,c){return a.resolve(b,c)},c=function(a,c){var d=b(a,c);if(void 0===d)throw a+" not available on this browser";return d};return{getOrDie:c}}),g("1w",["21"],function(a){var b=function(){return a.getOrDie("JSON")},c=function(a){return b().parse(a)},d=function(a,c,d){return b().stringify(a,c,d)};return{parse:c,stringify:d}}),g("1v",["1n","13","15","16","1u","19","n","1l","1w","q","1e","r","o"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=m.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),o=function(a,b){return n.state(a,j.constant(b))},p=function(a){return n.state(a,j.identity)},q=function(a,b,d){return c.readOptFrom(b,d).fold(function(){return e.nu(a,'Could not find valid *strict* value for "'+d+'" in '+i.stringify(b,null,2))},l.value)},r=function(a,b,d){return l.value(c.readOr(b,d)(a))},s=function(a,b){return l.value(c.readOptFrom(a,b))},t=function(a,b,d){var e=c.readOptFrom(a,b).map(function(a){return a===!0?d:a});return l.value(e)},u=function(a,b,c,e){return c.fold(function(c,f,g,i){var j=function(b){return i.extract(a.concat([c]),e,b).map(function(a){return d.wrap(f,e(a))})},m=function(b){return b.fold(function(){var a=d.wrap(f,e(k.none()));return l.value(a)},function(b){return i.extract(a.concat([c]),e,b).map(function(a){return d.wrap(f,e(k.some(a)))})})};return function(){return g.fold(function(){return q(a,b,c).bind(j)},function(a){var d=a();return r(b,c,d).bind(j)},function(){return s(b,c).bind(m)},function(a){var d=a();return t(b,c,d).bind(m)},function(a){var d=a();return r(b,c,{}).map(function(a){return h.deepMerge(d,a)}).bind(j)})}()},function(a,c){var f=c(b);return l.value(d.wrap(a,e(f)))})},v=function(a,c,d,e){var g=f.map(d,function(b){return u(a,c,b,e)});return b.consolidateObj(g,{})},w=function(a){var b=function(b,c,d){return a(d).fold(function(a){return e.nu(b,a)},l.value)},c=function(){return"val"};return{extract:b,toString:c}},x=function(a){var b=function(b,c,d){return v(b,d,a,c)},c=function(){var b=f.map(a,function(a){return a.fold(function(a,b,c,d){return a+" -> "+d.toString()},function(a,b){return"state("+a+")"})});return"obj{\n"+b.join("\n")+"}"};return{extract:b,toString:c}},y=function(a){var c=function(c,d,e){var g=f.map(e,function(b,e){return a.extract(c.concat(["["+e+"]"]),d,b)});return b.consolidateArr(g)},d=function(){return"array("+a.toString()+")"};return{extract:c,toString:d}},z=function(b,c){var d=function(a,c){return y(w(b)).extract(a,j.identity,c)},e=function(b,e,h){var i=g.keys(h);return d(b,i).bind(function(d){var g=f.map(d,function(b){return n.field(b,b,a.strict(),c)});return x(g).extract(b,e,h)})},h=function(){return"setOf("+c.toString()+")"};return{extract:e,toString:h}},A=w(l.value),B=j.compose(y,x);return{anyValue:j.constant(A),value:w,obj:x,arr:y,setOf:z,arrOfObj:B,state:n.state,field:n.field,output:o,snapshot:p}}),g("1t",["m","1u","1v","n","1w","r"],function(a,b,c,d,e,f){var g=function(a,c){return b.nu(a,'Choice schema did not contain choice key: "'+c+'"')},h=function(a,c,d){return b.nu(a,'The chosen schema: "'+d+'" did not exist in branches: '+e.stringify(c,null,2))},i=function(b,d,e,f,g){var i=a.readOptFrom(f,g);return i.fold(function(){return h(b,f,g)},function(a){return c.obj(a).extract(b.concat(["branch: "+g]),d,e)})},j=function(b,c){var e=function(d,e,f){var h=a.readOptFrom(f,b);return h.fold(function(){return g(d,b)},function(a){return i(d,e,f,c,a)})},f=function(){return"chooseOn("+b+"). Possible values: "+d.keys(c)};return{extract:e,toString:f}};return{choose:j}}),h("1x",Error),g("1h",["1t","1u","1v","19","1w","q","r","1x"],function(a,b,c,d,e,f,g,h){var i=c.value(g.value),j=function(a){return c.arrOfObj(a)},k=function(){return c.arr(i)},l=c.arr,m=c.obj,n=c.setOf,o=function(a){return c.value(a)},p=function(a,b,c,d){return b.extract([a],c,d).fold(function(a){return g.error({input:d,errors:a})},g.value)},q=function(a,b,c){return p(a,b,f.constant,c)},r=function(a,b,c){return p(a,b,f.identity,c)},s=function(a){return a.fold(function(a){throw new h(v(a))},f.identity)},t=function(a,b,c){return s(r(a,b,c))},u=function(a,b,c){return s(q(a,b,c))},v=function(a){return"Errors: \n"+d.map(a.errors,b.toString).join("\n\n")+"\n\nInput object: "+e.stringify(a.input,null,2)},w=function(b,c){return a.choose(b,c)};return{anyValue:f.constant(i),arrOfObj:j,arrOf:l,arrOfVal:k,valueOf:o,setOf:n,objOf:m,asStruct:q,asRaw:r,asStructOrDie:u,asRawOrDie:t,getOrDie:s,formatError:v,choose:w}}),g("2a",["21"],function(a){return function(){var b=a.getOrDie("FileReader");return new b}}),g("22",["p","2a"],function(a,b){return function(c){return a.nu(function(a){var d=b();d.onload=function(b){var c=b.target;a(c.result)},d.readAsText(c)})}}),g("23",["21"],function(a){return function(){var b=a.getOrDie("XMLHttpRequest");return new b}}),h("24",Math),h("25",isFinite),h("26",isNaN),h("27",parseFloat),g("1z",["24","25","26","27"],function(a,b,c,d){var e=function(a){return function(b,c){var d=typeof c;if(d!==a)throw b+" was not a "+a+". Was: "+c+" ("+d+")"}},f=e("string"),g=function(a,b){f(a,b);var c=b.length;if(1!==c)throw a+" was not a single char. Was: "+b},h=e("number"),i=function(b,c){if(h(b,c),c!==a.abs(c))throw b+" was not an integer. Was: "+c},j=function(a){return!c(d(a))&&b(a)},k=function(a,b){if(i(a,b),b<0)throw a+" was not a natural number. Was: "+b};return{vString:f,vChar:g,vInt:i,vNat:k,pNum:j}}),g("1j",["1z"],function(a){var b=function(a,b,c){if(""===b)return!0;if(a.length<b.length)return!1;var d=a.substr(c,c+b.length);return d===b},c=function(a,b){var c=function(a){var b=typeof a;return"string"===b||"number"===b};return a.replace(/\${([^{}]*)}/g,function(a,d){var e=b[d];return c(e)?e:a})},d=function(a){var b=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c};return function(){var c=b(arguments,function(a){return"string"==typeof a?a.toLowerCase():a});return a.apply(this,c)}},e=function(a,c){return b(a,c,0)},f=d(e),g=function(a,c){return b(a,c,a.length-c.length)},h=d(g),i=function(a,b){return a.substr(0,b)},j=function(a,b){return a.substr(a.length-b,a.length)},k=function(a,b){return function(c,d){return a(c,d)?b(c,c.length-d.length):c}},l=k(e,j),m=k(g,i),n=function(a,b){return a+b},o=function(a,b){return b+a},p=function(a,b){return function(c,d){return a(c,d)?c:b(c,d)}},q=p(e,o),r=p(g,n),s=function(a){return a.replace(/^\s+|\s+$/g,"")},t=function(a){return a.replace(/^\s+/g,"")},u=function(a){return a.replace(/\s+$/g,"")},v=function(a,b){return a.indexOf(b)!=-1},w=d(v),x=function(a){return a.replace(/\"/gm,"&quot;")},y=function(a,b){return a===b},z=d(y),A=function(a){if(""===a)throw"head on empty string";return a.substr(0,1)},B=function(a){if(""===a)throw"toe on empty string";return a.substr(a.length-1,a.length)},C=function(a){if(""===a)throw"tail on empty string";return a.substr(1,a.length-1)},D=function(a){if(""===a)throw"torso on empty string";return a.substr(0,a.length-1)},E=function(a){return""===a?a:A(a).toUpperCase()+C(a)},F=function(b,c){a.vString("str",b),a.vNat("num",c);for(var d="",e=0;e<c;e++)d+=b;return d},G=function(b){return function(c,d,e){a.vString("str",c),a.vChar("c",d),a.vNat("width",e);var f=c.length;return f>=e?c:b(c,F(d,e-f))}},H=G(function(a,b){return b+a}),I=G(function(a,b){return a+b});return{supplant:c,startsWith:e,startsWithIgnoringCase:f,endsWith:g,endsWithIgnoringCase:h,first:i,last:j,removeLeading:l,removeTrailing:m,ensureLeading:q,ensureTrailing:r,trim:s,lTrim:t,rTrim:u,contains:v,containsIgnoringCase:w,htmlEncodeDoubleQuotes:x,equals:y,equalsIgnoringCase:z,head:A,repead:F,padLeft:H,padRight:I,toe:B,tail:C,torso:D,capitalize:E}}),g("28",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),g("1y",["18","n","1l","22","p","23","1e","r","1j","28"],function(a,b,c,d,e,f,g,h,i,j){var k={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},l=function(l,m,n,o){var p={url:l,contentType:"application/json",processData:!1,type:"GET"},q=c.merge(p,o),r=f();r.open(q.type.toUpperCase(),q.url,!0),"blob"===q.responseType&&(r.responseType=q.responseType),a.isString(q.contentType)&&r.setRequestHeader("Content-Type",q.contentType);var s=q.dataType,t=a.isString(s)&&"*"!==s?k[s]+", "+k["*"]+"; q=0.01":k["*"];r.setRequestHeader("Accept",t),void 0!==q.xhrFields&&q.xhrFields.withCredentials===!0&&(r.withCredentials=!0),a.isObject(q.headers)&&b.each(q.headers,function(b,c){a.isString(c)||a.isString(b)?r.setRequestHeader(c,b):j.error("Request header data was not a string: ",c," -> ",b)});var u=function(a,b,c){m(a)},v=function(){return"blob"===q.responseType?g.from(r.response).map(d).getOr(e.pure("no response content")):e.pure(r.responseText)},w=function(){v().get(function(a){0===r.status?n("Unknown HTTP error (possible cross-domain request)",r.status,a):n('Could not load url "'+l+'": '+r.statusText,r.status,a)})},x=function(){try{return h.value(JSON.parse(r.response))}catch(a){return h.error({status:r.status,statusText:"Response was not JSON",responseText:r.responseText})}},y=function(){var a="json"===s?x(r):h.value(r.response);a.fold(w,function(a){u(a,r.statusText,r)})},z=function(){0===r.status?i.startsWith(q.url,"file:")?y():w():r.status<100||r.status>=400?w():y()};r.onerror=w,r.onload=z,void 0===q.data?r.send():r.send(q.data)};return{ajax:l}}),g("1i",["1l","1y","1w"],function(a,b,c){var d=function(a){try{var b=void 0===a||""===a;return b?a:c.parse(a)}catch(d){return{contents:a}}},e=function(a){return function(b,c,e){a(b,c,d(e))}},f=function(a,b,c,d){h(a,"GET",b,c,d)},g=function(b,d,e,f,g){h(b,"POST",e,f,a.merge({data:c.stringify(d)},g))},h=function(c,d,f,g,h){b.ajax(c,f,e(g),a.merge({dataType:"json",type:d},h))};return{get:f,post:g,ajax:h}}),g("t",["1h","18","n","1i","p","r","1j","1k"],function(a,b,c,d,e,f,g,h){var i=function(i,j,k,l){var m={headers:l},n=function(l){var n=a.asRawOrDie(i+".ajax.service.get",j,l),o=c.map(n,function(a){return b.isBoolean(a)?h(a):a}),p=g.supplant(k,o);return e.nu(function(a){d.get(p,function(b){a(f.value(b))},function(c,d,e){var g=b.isObject(e)?e:c;a(f.error(g))},m)})};return{execute:n}},j=function(c,g,h,i){var j={headers:i},k=function(i){var k=a.asRawOrDie(c+".ajax.service.post",g,i);return e.nu(function(a){d.post(h,k,function(b){a(f.value(b))},function(c,d,e){var g=b.isObject(e)?e:c;a(f.error(g))},j)})};return{execute:k}};return{get:i,post:j}}),g("1m",["m","19","1l"],function(a,b,c){var d=function(d,e,f,g,h){return h===!0?{known:{},unknown:f}:b.foldl(f,function(b,f){var h=g(f);return d(e,h).fold(function(){return{known:b.known,unknown:b.unknown.concat([f])}},function(d){var e=a.wrap(h,d);return{known:c.merge(b.known,e),unknown:b.unknown}})},{known:{},unknown:[]})};return{partition:d}}),g("u",["n","1l","f","1m","1e"],function(a,b,c,d,e){var f=function(a,b,d,f,g){var h=g===!0?e.none():b.get(f,d);return h.fold(function(){return a(d,g).map(function(a){return a.map(function(a){return b.set(d,a,f),a})})},function(a){return c.pure(a)})},g=function(d,e,f,g,h,i,j){var k=d(g,j);return c.mapSync(k,function(c){var d=h(c);return a.each(d,function(a,b){e.set(b,a,i)}),b.deepMerge(f,d)})},h=function(a,b,e,f,h,i,j){var k=d.partition(b.get,i,e,h,j);return 0===k.unknown.length?c.pure(k.known):g(a,b,k.known,k.unknown,f,i,j)};return{single:f,multiple:h}}),g("1o",["1n","1v"],function(a,b){var c=function(c){return b.field(c,c,a.strict(),b.anyValue())},d=function(c,d){return b.field(c,c,a.strict(),b.arrOfObj(d))},e=function(c,d){return b.field(c,c,a.strict(),d)},f=function(c,d){return b.field(c,c,a.defaulted(d),b.anyValue())},g=function(c){return b.field(c,c,a.asOption(),b.anyValue())},h=function(a,c,d,e){return b.field(a,c,d,e)},i=function(a,c){return b.state(a,c)};return{strict:c,option:g,strictArrayOfObj:d,strictArrayOf:e,defaulted:f,field:h,state:i}}),g("w",["1n","1o","1h","q"],function(a,b,c,d){var e=[b.strict("url"),b.defaulted("fresh",!1)],f=c.objOf(e),g=c.objOf([b.field("urls","urls",a.strict(),c.arrOfObj(e))]);return{one:d.constant(f),many:d.constant(g)}}),h("x",encodeURIComponent),g("b",["m","n","c","f","s","t","u","v","w","x"],function(a,b,c,d,e,f,g,h,i,j){return function(k,l,m){var n=e(m),o=f.get("ephox.link.service.one",i.one(),k+"/1/check?url=${url}&fresh=${fresh}",l),p=f.post("ephox.link.service.many",i.many(),k+"/1/check",l),q=function(a){return{url:a.url,result:c.derive(a.url,a.result)}},r=function(a,b){var c=function(b,c){return o.execute({url:j(a),fresh:c})},e=h.now(),f=g.single(c,n,a,e,void 0!==b&&b);return d.mapSync(f,q)},s=function(c,e){var f=function(a,b){return p.execute({urls:a})},i=function(a){return a.url},j=function(b){return a.indexOnKey(b.results,"url")},k=h.now(),l=g.multiple(f,n,c,j,i,k,void 0!==e&&e);return d.mapSync(l,function(a){return b.map(a,q)})};return{checkOne:r,checkMany:s,dumpCache:n.dump}}}),g("3",["b","c"],function(a,b,c){var d=function(a){var b=a.api_key;return b?b:a.linkchecker_api_key},e=function(b,c){var d=c?{"tinymce-api-key":c}:{};return a(b,d)},f=function(a){var b=e(a.linkchecker_service_url,d(a)),c=function(a){return b.checkOne(a)},f=function(a){return b.checkMany(a)};return{checkOne:c,checkMany:f}};return f}),g("4",[],function(){return function(a){var b=0,c=function(c){b++<5&&!a.removed&&a.notificationManager.open({text:"Link checker error: "+c,type:"error"})};return{showError:c}}}),h("y",setTimeout),h("z",clearTimeout),g("d",["y","z"],function(a,b){var c=function(c,d){var e,f;return f=function(){var f=arguments;b(e),e=a(function(){c.apply(this,f)},d)},f.stop=function(){b(e)},f};return{debounce:c}}),h("e",tinymce.util.Tools),h("g",tinymce.DOM),h("h",document.location),g("i",[],function(){var a=function(a){return a&&/^https?:\/\//.test(a)},b=function(a){return/^\w+:/.test(a)},c=function(a){return 0===a.indexOf("mailto:")},d=function(a){return c(a)};return{isWebUrl:a,isValidLocalUrl:d,hasProtocol:b}}),g("7",["g","e","h","i","c"],function(a,b,c,d,e){var f="data-mce-linkchecker-status",g="data-mce-linkchecker-focus",h=function(c){var d=a.select("a[href]",c);return b.map(d,function(b){return k(a.getAttrib(b,"href"))})},i=function(b,c){a.setAttrib(b,f,c)},j=function(a){i(a,null)},k=function(a){return{url:a}},l=function(c,d){return b.map(d,function(b){return{url:c(k(a.getAttrib(b,"href"))).url,elm:b}})},m=function(a,c){return b.grep(a,function(a){return a.url===c})},n=function(c,d,f){var g=l(d,a.select("a[href]",c));b.each(f,function(a,c){b.each(m(g,c),function(b){e.cata(a.result,function(a){i(b.elm,"invalid")},function(a){i(b.elm,"unknown")},function(a){i(b.elm,"valid")})})})},o=function(c,d,e){var f=l(d,a.select("a[href]",c));b.each(e,function(a){b.each(m(f,a.url),function(a){i(a.elm,"invalid")})})},p=function(b){return"invalid"===a.getAttrib(b,f)},q=function(b,c){return a.setAttrib(b,g,c?"true":null)},r=function(a){return function(c){b.each(c,function(b){b.attr(a,null)})}},s=function(a){return!d.isWebUrl(a)&&d.hasProtocol(a)},t=function(a){return function(b){var d=b.url.trim(),e=s(d)?d:a.documentBaseURI.toAbsolute(d);return k(0===e.indexOf("//")?c.protocol+e:e)}},u=function(a){a.addTempAttr(f),a.addTempAttr(g),a.addAttributeFilter(f,r(f)),a.addAttributeFilter(g,r(f))};return{links:h,mark:i,unmark:j,highlight:n,markInvalidLinks:o,isInvalid:p,toggleFocus:q,registerAttrs:u,normalizer:t}}),h("10",tinymce.ui.Menu),h("1p",tinymce.Env),h("l",window),h("12",document),g("11",["g","1p","l","12","7"],function(a,b,c,d,e){var f=function(e){if(!b.ie||b.ie>10){var f=d.createElement("a");f.target="_blank",f.href=e,f.rel="noreferrer noopener";var g=d.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,c,!0,0,0,0,0,!1,!1,!1,!1,0,null),f.dispatchEvent(g)}else{var h=c.open("","_blank");if(h){h.opener=null;var i=h.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+a.encode(e)+'">'),i.close()}}},g=function(a){return function(){a.execCommand("mceLink")}},h=function(b,c){return function(){
var d=e.normalizer(b)({url:a.getAttrib(c,"href")});f(d.url)}},i=function(b,c){return function(){b.undoManager.transact(function(){a.remove(c,!0)})}},j=function(a,b){return function(){a.add(b.href),e.unmark(b)}};return{edit:g,view:h,unlink:i,ignore:j}}),g("j",["10","g","11","7","12"],function(a,b,c,d,e){var f=function(a,c,d){var e=b.getPos(a.getContentAreaContainer()),f=a.dom.getPos(d),g=a.dom.getRoot();"BODY"==g.nodeName?(f.x-=g.ownerDocument.documentElement.scrollLeft||g.scrollLeft,f.y-=g.ownerDocument.documentElement.scrollTop||g.scrollTop):(f.x-=g.scrollLeft,f.y-=g.scrollTop),e.x+=f.x,e.y+=f.y,c.moveTo(e.x,e.y+d.offsetHeight+1)},g=function(a){return a.plugins.link?{text:"Link",icon:"link",onclick:c.edit(a)}:null},h=function(b,h,i){var j=new a({items:[g(b),{text:"Open link",icon:"newtab",onclick:c.view(b,h)},{text:"Remove link",icon:"unlink",onclick:c.unlink(b,h)},{text:"-"},{text:"Ignore",onclick:c.ignore(i,h)}],context:"contextmenu",onhide:function(){j.remove(),d.toggleFocus(h,!1)}});j.renderTo(e.body),f(b,j,h),d.toggleFocus(h,!0)},i=function(a,b){return function(c){var e=a.dom.getParent(c.target,"a[href]");d.isInvalid(e)&&(c.preventDefault(),c.stopImmediatePropagation(),h(a,e,b))}},j=function(a,b){a.on("contextmenu",i(a,b),!0)};return{register:j}}),g("5",["d","e","f","3","7","i","j"],function(a,b,c,d,e,f,g){var h=function(a,c){return b.grep(a,function(a){return c.has(a.url)===!1})},i=function(a){return function(b){return f.isWebUrl(b.url)===a}},j=function(a){return b.grep(a,function(a){return f.isValidLocalUrl(a.url)===!1})},k=function(a,d,f,g,j){var k=b.grep(b.map(e.links(j),f),i(!0)),l=a.checkMany(h(k,d));c.handle(l,function(a){g.showError(a)},function(a){e.highlight(j,f,a)})},l=function(a,c,d,f,g){var k=b.grep(b.map(e.links(g),d),i(!1)),l=h(j(k),c);e.markInvalidLinks(g,d,l)},m=function(a,b,c,d,e){k(a,b,c,d,e),l(a,b,c,d,e)},n=function(a,b){var c=a.linkchecker_content_css;return c?c:b+"/content.min.css"},o=function(b,c,d,f,h,i){var j=b.getBody(),k=a.debounce(m,500);e.registerAttrs(b.serializer),b.dom.loadCSS(n(b.settings,i)),b.on("change setContent undo redo",function(){k(f,c,d,h,j)}),m(f,c,d,h,j),g.register(b,c)};return{setup:o}}),g("6",["d","i","7","f","c"],function(a,b,c,d,e){var f=function(a,b){return function(){return{status:a,message:b}}},g=f("invalid","Url does not seem to be valid"),h=f("none",""),i=f("valid","The url seem to be valid"),j=function(a,b){return function(c,f){var j=b.checkOne(c.url,a);d.handle(j,function(a){f({status:"none",message:""})},function(a){e.cata(a.result,function(a){f(g())},function(a){f(h())},function(a){f(i())})})}},k=function(c,d,e){var f=a.debounce(j(c,e),500);return function(a,c){var e=d({url:a.url});!b.isWebUrl(e.url)&&b.isValidLocalUrl(e.url)?c(i()):b.isWebUrl(e.url)?f(e,c):c(h())}},l=function(a,b,c,d){"filepicker_validator_handler"in a==!1&&(a.filepicker_validator_handler=k(b,c,d))};return{setup:l}}),g("k",[],function(){var a=0,b=1,c=-1,d=function(a){return parseInt(a,10)},e=function(a){return function(){return a}},f=function(a,b,c){return{major:e(a),minor:e(b),patch:e(c)}},g=function(a){var b=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(a);return b?f(d(b[1]),d(b[2]),d(b[3])):f(0,0,0)},h=function(d,e){var f=d-e;return 0===f?a:f>0?b:c},i=function(b,c){var d=h(b.major(),c.major());if(d!==a)return d;var e=h(b.minor(),c.minor());if(e!==a)return e;var f=h(b.patch(),c.patch());return f!==a?f:a};return{nu:f,parse:g,compare:i}}),g("8",["k"],function(a){var b=function(a){var b=[a.majorVersion,a.minorVersion].join(".");return b.split(".").slice(0,3).join(".")},c=function(c){return c?a.parse(b(c)):null},d=function(b,d){return a.compare(c(b),a.parse(d))<0};return{getVersion:c,isLessThan:d}}),g("9",["l"],function(a){var b=function(a,b){return function(){var c=a.console;c&&b in c&&c[b].apply(c,arguments)}};return{log:b(a,"log"),error:b(a,"error"),warn:b(a,"warm")}}),h("a",tinymce),g("0",["1","2","3","4","5","6","7","8","9","a"],function(a,b,c,d,e,f,g,h,i,j){var k=function(a){return"string"==typeof a.linkchecker_service_url},l=function(a,l){if(h.isLessThan(j,"4.4.3"))return i.error('The "linkchecker" plugin requires at least 4.4.3 version of TinyMCE.'),function(){};var m=c(a.settings),n=b(),o=g.normalizer(a),p=d(a);return a.on("SkinLoaded",function(){k(a.settings)?(e.setup(a,n,o,m,p,l),f.setup(a.settings,n,o,m)):p.showError("You need to specify the linkchecker_service_url setting")}),{}};return a.add("linkchecker",l),function(){}}),d("0")()}();